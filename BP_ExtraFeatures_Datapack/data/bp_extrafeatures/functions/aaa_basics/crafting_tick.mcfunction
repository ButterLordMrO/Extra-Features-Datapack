##Cosmic Books
# Curse
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ fire if block ~ ~ ~ iron_trapdoor run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:binding_curse",lvl:1s},{id:"minecraft:vanishing_curse",lvl:1s}]}}}
# Sword
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ #anvil run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:sharpness",lvl:5s},{id:"minecraft:knockback",lvl:2s},{id:"minecraft:fire_aspect",lvl:2s},{id:"minecraft:looting",lvl:3s},{id:"minecraft:sweeping",lvl:3s},{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:mending",lvl:1s}]}}}
# Bow
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ fletching_table run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:power",lvl:5s},{id:"minecraft:punch",lvl:2s},{id:"minecraft:flame",lvl:1s},{id:"minecraft:mending",lvl:1s}]}}}
# Axe
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ grindstone run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:sharpness",lvl:5s},{id:"minecraft:efficiency",lvl:5s},{id:"minecraft:silk_touch",lvl:1s},{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:mending",lvl:1s}]}}}
# Shovel
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ cartography_table run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:efficiency",lvl:5s},{id:"minecraft:silk_touch",lvl:1s},{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:mending",lvl:1s}]}}}
# Pickaxe
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ blast_furnace run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:efficiency",lvl:5s},{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:fortune",lvl:3s},{id:"minecraft:mending",lvl:1s}]}}}
#Fishing Rod
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ dark_prismarine run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:luck_of_the_sea",lvl:3s},{id:"minecraft:lure",lvl:3s},{id:"minecraft:mending",lvl:1s}]}}}
#Everything (Why would you do this)
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ crafting_table run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:mending",lvl:1s}]}}}
#Trident
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ sea_lantern run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:impaling",lvl:5s},{id:"minecraft:riptide",lvl:3s},{id:"minecraft:mending",lvl:1s}]}}}
#Armor (Best one of them all)
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ smithing_table run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:protection",lvl:4s},{id:"minecraft:respiration",lvl:3s},{id:"minecraft:aqua_affinity",lvl:1s},{id:"minecraft:thorns",lvl:3s},{id:"minecraft:depth_strider",lvl:3s},{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:mending",lvl:1s},{id:"minecraft:soul_speed",lvl:3s},{id:"minecraft:swift_sneak",lvl:3s}]}}}
#Crossbow
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:5b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:book"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s if block ~ ~-1 ~ target run summon item ~ ~ ~ {Tags:["cosmic_book_craft"],Item:{id:"minecraft:enchanted_book",Count:1b,tag:{StoredEnchantments:[{id:"minecraft:unbreaking",lvl:3s},{id:"minecraft:mending",lvl:1s},{id:"minecraft:piercing",lvl:4s},{id:"minecraft:quick_charge",lvl:3s}]}}}

# Kill Commands
execute as @e[tag=cosmic_book_craft] run kill @e[type=item,nbt={Item:{id:"minecraft:book",Count:1b}},nbt=!{Item:{tag:{custom_item:1b}}},sort=nearest,limit=1]
execute as @e[tag=cosmic_book_craft] run kill @e[type=item,nbt={Item:{id:"minecraft:gunpowder",Count:5b,tag:{cosmic_powder:1b}}},sort=nearest,limit=1]
execute at @e[tag=cosmic_book_craft] run particle smoke ~ ~ ~ 0 0 0 1 50
execute at @e[tag=cosmic_book_craft] run playsound entity.zombie_villager.cure player @a ~ ~ ~ 0.5
execute as @e[tag=cosmic_book_craft] run tag @s remove cosmic_book_craft

##Cosmic Sword
execute as @e[type=item,nbt={Item:{tag:{cosmic_powder:1b},Count:12b,id:"minecraft:gunpowder"}}] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:dragon_egg"}}, distance=..0.2, limit=1, sort=random, nbt=!{Item:{tag:{custom_item:1b}}},] at @s as @e[type=item,nbt={Item:{Count:1b,id:"minecraft:netherite_sword"}}, nbt=!{Item:{tag:{custom_sword:1b}}}, distance=..0.2, limit=1, sort=random] run summon item ~ ~ ~ {Tags: ["cosmic_sword_craft"],Item:{id:"minecraft:netherite_sword",Count:1b,tag:{display:{Name:'{"text":"Cosmic Sword","color":"#D18CFF","italic":false}',Lore:['{"text":" "}','{"text":"When in Main Hand:","color":"gray","italic":false}','{"text":" 10 Attack Damage","color":"dark_green","italic":false}','{"text":" 1.6 Attack Speed","color":"dark_green","italic":false}','{"text":" +5% Movement Speed","color":"dark_aqua","italic":false}']},HideFlags:2,CustomModelData:6271001,custom_sword:1b,cosmic_sword:1b,AttributeModifiers:[{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Amount:-2.4,Operation:0,UUID:[I;1312168388,-1993585685,-1410833130,-2090126858],Slot:"mainhand"},{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Amount:10,Operation:0,UUID:[I;-906911640,-2016721608,-1797846889,-450247884],Slot:"mainhand"},{AttributeName:"generic.movement_speed",Name:"generic.movement_speed",Amount:0.05,Operation:1,UUID:[I;651715510,283068208,-2067543348,-107260027],Slot:"mainhand"}]}}}

execute as @e[tag=cosmic_sword_craft] run kill @e[type=item,nbt={Item:{id:"minecraft:dragon_egg",Count:1b}},nbt=!{Item:{tag:{custom_item:1b}}},sort=nearest,limit=1]
execute as @e[tag=cosmic_sword_craft] run kill @e[type=item,nbt={Item:{id:"minecraft:netherite_sword",Count:1b}},nbt=!{Item:{tag:{custom_sword:1b}}},sort=nearest,limit=1]
execute as @e[tag=cosmic_sword_craft] run kill @e[type=item,nbt={Item:{id:"minecraft:gunpowder",Count:12b,tag:{cosmic_powder:1b}}},sort=nearest,limit=1]
execute at @e[tag=cosmic_sword_craft] run particle witch ~ ~ ~ 0 0 0 1 50
execute at @e[tag=cosmic_sword_craft] run playsound entity.lightning_bolt.thunder player @a ~ ~ ~
execute as @e[tag=cosmic_sword_craft] run tag @s remove cosmic_sword_craft